"0","# Get demographic data from ACS"
"0","#### Step 2: Get Demographic Data ----"
"0",""
"0","pa_demo <- get_acs("
"0","  geography = ""tract"","
"0","  state = ""PA"","
"0","  year = 2022,             "
"0","  survey = ""acs5"","
"0","  variables = c("
"0","    total_pop = ""B01003_001"",       # Total population"
"0","    median_income = ""B19013_001"",   # Median household income"
"0","    age_65_66 = ""B01001_020"",       # Male 65–66"
"0","    age_67_69 = ""B01001_021"","
"0","    age_70_74 = ""B01001_022"","
"0","    age_75_79 = ""B01001_023"","
"0","    age_80_84 = ""B01001_024"","
"0","    age_85_plus = ""B01001_025"","
"0","    f_65_66 = ""B01001_044"",         # Female 65–66"
"0","    f_67_69 = ""B01001_045"","
"0","    f_70_74 = ""B01001_046"","
"0","    f_75_79 = ""B01001_047"","
"0","    f_80_84 = ""B01001_048"","
"0","    f_85_plus = ""B01001_049"""
"0","  ),"
"0","  output = ""wide"""
"0",")"
"0",""
"0",""
"0","pa_demo <- pa_demo %>%"
"0","  mutate("
"0","    pop_65_over = age_65_66E + age_67_69E + age_70_74E + age_75_79E +"
"0","                  age_80_84E + age_85_plusE +"
"0","                  f_65_66E + f_67_69E + f_70_74E + f_75_79E +"
"0","                  f_80_84E + f_85_plusE"
"0","  ) %>%"
"0","  select(GEOID, total_pop = total_popE, median_income = median_incomeE, pop_65_over)"
"0",""
"0",""
"0",""
"0","# Join to tract boundaries"
"0","census_tracts_demo <- census_tracts %>%"
"0","  left_join(pa_demo, by = ""GEOID"")"
"0",""
"0",""
"0","# 1. What year of ACS data are you using?"
"0","acs_year <- 2022"
"0","cat(""ACS Year Used:"", acs_year, ""\n"")"
"1","ACS Year Used:"
"1"," "
"1","2022"
"1"," "
"1","
"
"0","# 2. How many tracts have missing income data?"
"0","missing_income <- sum(is.na(census_tracts_demo$median_income))"
"0","cat(""Number of tracts with missing income data:"", missing_income, ""\n"")"
"1","Number of tracts with missing income data:"
"1"," "
"1","62"
"1"," "
"1","
"
"0","# 3. What is the median income across all PA census tracts?"
"0","median_income_pa <- median(census_tracts_demo$median_income, na.rm = TRUE)"
"0","cat(""Median income across all PA census tracts:"", dollar(median_income_pa), ""\n"")"
"1","Median income across all PA census tracts:"
"1"," "
"1","$70,188"
"1"," "
"1","
"
